{"version":3,"sources":["index.js"],"names":["isMobile","$","window","width","rangeInput","document","querySelectorAll","currentAge","retireAge","lifeSpan","totalAssets","salary","incomeReplacementRatio","inflation","totalInvest","insuranceVal","requiredAmount","getElementById","shortage","rspResult","PMT","ir","np","pv","fv","type","pmt","pvif","Math","pow","calcRequiredAmount","requiredAmountVal","ceil","innerHTML","formatValWithCommas","calcPresentInsuranceValue","rate","nper","round","conv_number","expr","decplaces","str","eval","length","decpoint","substring","parseFloat","alert","pv_value","x","y","calcCurrentDepositAssets","floor","calcShortage","currentDepositAssets","presentValueOfInsurance","shortageVal","calcPMT","pmtV","val","toString","replace","checkIfLimit","value","progressName","maxV","concat","slider","minV","limit","max","min","calcValForRangeSlider","checkWid","windowSize","mobileFun","desktopFun","prodcutOwl","owlCarousel","nav","dots","responsive","0","loop","items","onChanged","event","page","index","text","on","trigger","off","setCarousel","autoplay","769","margin","1280","infoOwl","center","autoHeight","setSlider","arguments","undefined","v","s","setVariable","range","step","slide","ui","change","this","resize","ready","fadeIn","closest","fadeOut","is","ajax","url","data","name","phone","isPcalife","identityNumber","success","res","error","err"],"mappings":"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","file":"all.js","sourcesContent":["let isMobile = $(window).width() > 768;\n\n//-- range slider part\nlet rangeInput = document.querySelectorAll(\".amount-input\");\nlet currentAge = 35,\n  retireAge = 65,\n  lifeSpan = 75,\n  totalAssets = 500000,\n  salary = 46000,\n  incomeReplacementRatio = 70,\n  inflation = 5,\n  totalInvest = 2;\nlet insuranceVal = 17120;\n\nlet requiredAmount = document.getElementById(\"requiredAmount\");\nlet shortage = document.getElementById(\"shortage\");\nlet rspResult = document.getElementById(\"rspResult\");\n\nfunction PMT(ir, np, pv, fv, type) {\n  /*\n   * ir   - interest rate per month\n   * np   - number of periods (months)\n   * pv   - present value\n   * fv   - future value\n   * type - when the payments are due:\n   *        0: end of the period, e.g. end of month (default)\n   *        1: beginning of period\n   */\n  var pmt, pvif;\n  fv || (fv = 0);\n  type || (type = 0);\n\n  if (ir === 0) return -(pv + fv) / np;\n\n  pvif = Math.pow(1 + ir, np);\n  pmt = (-ir * (pv * pvif + fv)) / (pvif - 1);\n\n  if (type === 1) pmt /= 1 + ir;\n\n  console.log(\"pmt in function:\" + pmt);\n  return pmt;\n}\n\nfunction calcRequiredAmount() {\n  var requiredAmountVal = Math.ceil(\n    salary * (incomeReplacementRatio / 100) * (lifeSpan - retireAge) * 12\n  );\n  requiredAmount.innerHTML = formatValWithCommas(requiredAmountVal);\n  return requiredAmountVal;\n}\n\n// calc present insurance value\nfunction calcPresentInsuranceValue(rate, nper, pmt) {\n  rate = rate / 12 / 100;\n  if (rate === 0 || !rate) {\n    return false;\n  } else {\n    var val = Math.round((-pmt * (1 - 1 / Math.pow(1 + rate, nper))) / rate);\n    return val;\n  }\n}\n\n// This function is from David Goodman's Javascript Bible.\nfunction conv_number(expr, decplaces) {\n  var str = \"\" + Math.round(eval(expr) * Math.pow(10, decplaces));\n  while (str.length <= decplaces) {\n    str = \"0\" + str;\n  }\n\n  var decpoint = str.length - decplaces;\n  return str.substring(0, decpoint) + \".\" + str.substring(decpoint, str.length);\n}\n// Parameters are rate, total number of periods, payment made each period and future value\nfunction pv(rate, nper, pmt, fv) {\n  rate = parseFloat(rate);\n  nper = parseFloat(nper);\n  pmt = parseFloat(pmt);\n  fv = parseFloat(fv);\n  if (nper == 0) {\n    alert(\"Why do you want to test me with zeros?\");\n    return 0;\n  }\n  if (rate == 0) {\n    // Interest rate is 0\n    pv_value = -(fv + pmt * nper);\n  } else {\n    x = Math.pow(1 + rate, -nper);\n    y = Math.pow(1 + rate, nper);\n    pv_value = -(x * (fv * rate - pmt + y * pmt)) / rate;\n  }\n  pv_value = conv_number(pv_value, 2);\n  return pv_value;\n}\n\n//--------\n\n//calc total deposit assets 計算活儲資產\nfunction calcCurrentDepositAssets(totalAssets, retireAge, currentAge) {\n  totalAssets = Math.floor(totalAssets);\n  // var periods = retireAge - currentAge;\n  return Math.round(totalAssets * Math.pow(1.01, retireAge - currentAge));\n}\n\nfunction calcShortage() {\n  var requiredAmountVal = calcRequiredAmount();\n  var currentDepositAssets = calcCurrentDepositAssets(\n    totalAssets,\n    retireAge,\n    currentAge\n  );\n  var presentValueOfInsurance = calcPresentInsuranceValue(\n    inflation,\n    (lifeSpan - retireAge) * 12,\n    insuranceVal * -1,\n    0\n  );\n\n  // var ppPV = pv(inflation / 100 / 12, (lifeSpan - retireAge) * 12, insuranceVal * -1, 0);\n\n  var shortageVal =\n    requiredAmountVal - presentValueOfInsurance - currentDepositAssets;\n  console.log(\"currentDepositAssets:\" + currentDepositAssets);\n  console.log(\"presentValueOfInsurance:\" + presentValueOfInsurance);\n\n  // console.log('ppPV:' + ppPV);\n\n  shortage.innerHTML = formatValWithCommas(shortageVal);\n  return shortageVal;\n}\n\nfunction calcPMT() {\n  // alert('call pmt');\n  var shortageVal = calcShortage();\n  var pmtV = Math.floor(\n    PMT(\n      totalInvest / 100 / 12,\n      (retireAge - currentAge) * 12,\n      0,\n      shortageVal * -1,\n      0\n    )\n  );\n  console.log(\"pmtV:\" + pmtV);\n  rspResult.innerHTML = formatValWithCommas(pmtV);\n  return pmtV;\n}\n\nfunction formatValWithCommas(val) {\n  val = val.toString();\n  return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\n// check if input value over max / below min\nfunction checkIfLimit(value, progressName) {\n  var maxV = $(`#progress-${progressName}`).slider(\"option\", \"max\");\n  var minV = $(`#progress-${progressName}`).slider(\"option\", \"min\");\n  // console.log(maxV);\n  if (value > maxV || minV > value) {\n    if (value > maxV) {\n      return { limit: \"more\", max: maxV, min: minV };\n    } else {\n      return { limit: \"less\", max: maxV, min: minV };\n    }\n  } else {\n    return false;\n  }\n}\n\n// check return value for ui slider\nfunction calcValForRangeSlider(value, progressName) {\n  console.log(value);\n  console.log(progressName);\n  var step = $(`#progress-${progressName}`).slider(\"option\", \"step\");\n  console.log(step);\n  $(`#progress-${progressName}`).slider(\"value\", value);\n}\n\n$(window).resize(function () {\n  let windowSize = $(window).width();\n  checkWid(windowSize);\n});\n\nfunction checkWid(windowSize) {\n  if (windowSize < 768 && !isMobile) {\n    isMobile = true;\n    mobileFun();\n  } else if (windowSize > 768 && isMobile) {\n    isMobile = false;\n    desktopFun();\n  }\n}\n\nfunction mobileFun() {\n  let prodcutOwl = $(\"#product-carousel\");\n  prodcutOwl.owlCarousel({\n    nav: false,\n    dots: true,\n    responsive: {\n      0: {\n        loop: true,\n        items: 1,\n      },\n    },\n    onChanged: (event) => {\n      if (event.page.index < 0) {\n        $(\"#productNowPage\").text(`01`);\n      } else {\n        $(\"#productNowPage\").text(`0${event.page.index + 1}`);\n      }\n    },\n  });\n  $(\"#productLeftArrow\").on(\"click\", () => {\n    prodcutOwl.trigger(\"prev.owl.carousel\");\n  });\n  $(\"#productRightArrow\").on(\"click\", () => {\n    prodcutOwl.trigger(\"next.owl.carousel\");\n  });\n}\n\nfunction desktopFun() {\n  $(\"#product-carousel\").trigger(\"destroy.owl.carousel\");\n  $(\"#productLeftArrow\").off(\"click\");\n  $(\"#productRightArrow\").off(\"click\");\n}\n\nfunction setCarousel() {\n  $(\"#carouselBox01\").owlCarousel({\n    nav: false,\n    dots: true,\n    autoplay: true,\n    responsive: {\n      0: {\n        loop: true,\n        items: 1,\n      },\n      769: {\n        loop: false,\n        items: 3,\n        margin: 50,\n      },\n      1280: {\n        margin: 100,\n      },\n    },\n  });\n\n  let infoOwl = $(\"#carouselBox02\").owlCarousel({\n    nav: false,\n    dots: true,\n    loop: true,\n    items: 1,\n    center: true,\n    autoHeight: true,\n    margin: 70,\n    onChanged: (event) => {\n      if (event.page.index < 0) {\n        $(\"#infoNowPage\").text(`01`);\n      } else {\n        $(\"#infoNowPage\").text(`0${event.page.index + 1}`);\n      }\n    },\n  });\n  $(\"#infoLeftArrow\").on(\"click\", () => {\n    infoOwl.trigger(\"prev.owl.carousel\");\n  });\n  $(\"#infoRightArrow\").on(\"click\", () => {\n    infoOwl.trigger(\"next.owl.carousel\");\n  });\n}\n\nfunction setSlider(\n  progressName,\n  min = 0,\n  max = 100,\n  v = 0,\n  s = 1,\n  setVariable\n) {\n  $(`#progress-${progressName}`).slider({\n    range: \"min\",\n    min: min,\n    max: max,\n    value: v,\n    step: s,\n    slide: function (event, ui) {\n      setVariable(ui.value);\n    },\n    change: function (event, ui) {\n      calcRequiredAmount();\n      calcShortage();\n      calcPMT();\n    },\n  });\n  $(`#amount-${progressName}`).on(\"change\", function () {\n    $(`#progress-${progressName}`).slider(\"value\", $(this).val());\n    setVariable($(this).val());\n    calcValForRangeSlider($(this).val(), progressName);\n  });\n}\n\n$(document).ready(function () {\n  checkWid($(window).width());\n  setCarousel();\n\n  setSlider(\"currentAge\", 18, 74, 35, 1, (val) => {\n    $(`#amount-currentAge`).val(val);\n    currentAge = val;\n  });\n  setSlider(\"retireAge\", 50, 75, 65, 1, (val) => {\n    $(`#amount-retireAge`).val(val);\n    retireAge = val;\n  });\n  setSlider(\"lifeSpan\", 66, 99, 75, 1, (val) => {\n    $(`#amount-lifeSpan`).val(val);\n    lifeSpan = val;\n  });\n  setSlider(\"totalAssets\", 0, 3000, 50, 0.1, (val) => {\n    $(`#amount-totalAssets`).val(val);\n    totalAssets = val * 10000;\n  });\n  setSlider(\"salary\", 2.3, 30, 4.6, 0.1, (val) => {\n    $(`#amount-salary`).val(val);\n    salary = val * 10000;\n  });\n  setSlider(\"incomeReplacementRatio\", 10, 100, 70, 1, (val) => {\n    $(`#amount-incomeReplacementRatio`).val(val);\n    incomeReplacementRatio = val;\n  });\n  setSlider(\"inflation\", 0, 5, 5, 1, (val) => {\n    $(`#amount-inflation`).val(val);\n    inflation = val;\n  });\n  setSlider(\"totalInvest\", 0, 10, 2, 1, (val) => {\n    $(`#amount-totalInvest`).val(val);\n    totalInvest = val;\n  });\n\n  calcRequiredAmount();\n  calcShortage();\n  calcPMT();\n\n  $(\"#popupHandler1\").on(\"click\", () => {\n    $(\"#popup1\").fadeIn();\n  });\n  $(\"#popupHandler2\").on(\"click\", () => {\n    $(\"#popup2\").fadeIn();\n  });\n  $(\".close,.mask\").on(\"click\", function () {\n    $(this).closest(\".popup\").fadeOut();\n  });\n\n  $(\"#sendBtn\").on(\"click\", () => {\n    if (!$(\"#name\").val()) {\n      alert(\"請填寫姓名\");\n      return;\n    } else if (!$(\"#phone\").val()) {\n      alert(\"請填寫電話\");\n      return;\n    } else if ($(\"input[name='isPcalife']:checked\").val() == undefined) {\n      alert(\"請確認是否已經是保誠保戶\");\n      return;\n    } else if (\n      $(\"input[name='isPcalife']:checked\").val() == \"1\" &&\n      !$(\"#identityNumber\").val()\n    ) {\n      alert(\"請輸入身分證字號\");\n      return;\n    } else if (!$(\"#personalInformation\").is(\":checked\")) {\n      alert(\"請閱讀並同意個人資料告知暨同意事項\");\n      return;\n    } else if (!$(\"#checkBtn\").is(\":checked\")) {\n      alert(\"請確認以上資料正確無誤\");\n      return;\n    }\n    $.ajax({\n      url: \"api/postForm\",\n      type: \"post\",\n      data: {\n        name: $(\"#name\").val(),\n        phone: $(\"#phone\").val(),\n        isPcalife: $(\"input[name='isPcalife']:checked\").val(),\n        identityNumber: $(\"#identityNumber\").val(),\n        currentAge,\n        retireAge,\n        lifeSpan,\n        totalAssets,\n        salary,\n        incomeReplacementRatio,\n        inflation,\n        totalInvest,\n        requiredAmount: calcRequiredAmount(),\n        shortage: calcShortage(),\n        rspResult: calcPMT(),\n      },\n      success: function (res) {\n        console.log(res);\n        alert(\"成功送出資料\");\n      },\n      error: function (err) {\n        console.log(err);\n        alert(\"送出失敗\");\n      },\n    });\n  });\n});\n"]}